==============================
ğŸ§ª EXPERIMENT 4 â€” CI/CD PIPELINE USING GITHUB ACTIONS & DOCKER HUB
==============================
ğŸ¯ OBJECTIVE:
To create a Python app, test it using pytest, build and push the Docker image automatically via GitHub Actions.

ğŸ§° TOOLS REQUIRED:
Python 3.x, GitHub, Docker, Docker Hub, VS Code, Web Browser

==============================
âš™ï¸ STEP 1 â€” CREATE PROJECT FOLDER
==============================
mkdir python-ci-docker-lab && cd python-ci-docker-lab

==============================
âš™ï¸ STEP 2 â€” CREATE APP FILE (app.py)
==============================
cat > app.py << 'EOF'
def add(a, b):
    return a + b

if __name__ == "__main__":
    print("Hello from Python CI/CD Lab!")
    print("2 + 3 =", add(2, 3))
EOF

==============================
âš™ï¸ STEP 3 â€” CREATE TEST FILE
==============================
mkdir tests && cat > tests/test_app.py << 'EOF'
from app import add
def test_add():
    assert add(2, 3) == 5
    assert add(-1, 1) == 0
EOF

==============================
âš™ï¸ STEP 4 â€” CREATE REQUIREMENTS FILE
==============================
echo "pytest==8.3.2" > requirements.txt

==============================
âš™ï¸ STEP 5 â€” CREATE DOCKERFILE
==============================
cat > Dockerfile << 'EOF'
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["python", "app.py"]
EOF

==============================
âš™ï¸ STEP 6 â€” TEST LOCALLY
==============================
pytest -q
docker build -t python-ci-lab .
docker run --rm python-ci-lab

==============================
âš™ï¸ STEP 7 â€” PUSH PROJECT TO GITHUB
==============================
git init && git add . && git commit -m "Initial CI/CD commit"
git branch -M main
git remote add origin https://github.com/<yourusername>/python-ci-docker-lab.git
git push -u origin main

==============================
âš™ï¸ STEP 8 â€” CREATE GITHUB ACTION WORKFLOW FILE
==============================
mkdir -p .github/workflows && cat > .github/workflows/ci-dockerhub.yml << 'EOF'
name: CI-DockerHub
on:
  push:
    branches: [ "main" ]
jobs:
  build-test-push:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - name: Install dependencies
        run: |
          pip install -r requirements.txt
      - name: Run tests
        run: pytest -q
      - name: Login to Docker Hub
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
      - name: Build and Push Docker Image
        uses: docker/build-push-action@v6
        with:
          push: true
          tags: ${{ secrets.DOCKERHUB_USERNAME }}/python-ci-lab:latest
EOF

==============================
âš™ï¸ STEP 9 â€” ADD GITHUB SECRETS
==============================
Add in GitHub â†’ Settings â†’ Secrets â†’ Actions:
DOCKERHUB_USERNAME = <yourusername>
DOCKERHUB_TOKEN = <your Docker access token>

==============================
âœ… RESULT:
On code push, GitHub Actions tests the app, builds Docker image, and pushes to Docker Hub automatically.

===================================================
ğŸ§ª EXPERIMENT 5 â€” JENKINS DEPLOYMENT USING DOCKER
===================================================
ğŸ¯ OBJECTIVE:
To deploy Jenkins using Docker and automate a simple static website pipeline.

ğŸ§° TOOLS REQUIRED:
Docker, Docker Compose, Jenkins, VS Code, Web Browser

==============================
âš™ï¸ STEP 1 â€” CREATE PROJECT FOLDER
==============================
mkdir jenkins-static-site && cd jenkins-static-site

==============================
âš™ï¸ STEP 2 â€” CREATE DOCKER COMPOSE FILE
==============================
cat > docker-compose.yml << 'EOF'
version: '3.8'
services:
  jenkins:
    image: jenkins/jenkins:lts
    container_name: jenkins
    restart: unless-stopped
    ports:
      - "8080:8080"
      - "50000:50000"
    volumes:
      - jenkins_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
volumes:
  jenkins_home:
EOF

==============================
âš™ï¸ STEP 3 â€” START JENKINS
==============================
docker compose up -d

==============================
âš™ï¸ STEP 4 â€” GET ADMIN PASSWORD
==============================
docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword

==============================
âš™ï¸ STEP 5 â€” ACCESS JENKINS DASHBOARD
==============================
Open http://localhost:8080 â†’ enter password â†’ install suggested plugins â†’ create admin user

==============================
âš™ï¸ STEP 6 â€” CREATE PIPELINE SCRIPT
==============================
cat > pipeline.groovy << 'EOF'
pipeline {
    agent any
    stages {
        stage('Generate Site') {
            steps {
                script {
                    sh 'mkdir -p site'
                    writeFile file: 'site/index.html', text: '<h1>Welcome to Jenkins Static Site ğŸš€</h1>'
                }
            }
        }
        stage('Publish Site') {
            steps {
                publishHTML(target: [
                    reportDir: 'site',
                    reportFiles: 'index.html',
                    reportName: 'Static Website'
                ])
            }
        }
    }
}
EOF

==============================
âš™ï¸ STEP 7 â€” RUN PIPELINE IN JENKINS
==============================
Build pipeline and view published site in Jenkins.

==============================
âœ… RESULT:
Jenkins container deployed via Docker automates site creation and HTML publishing.

===================================================
ğŸ§ª EXPERIMENT 6 â€” NGINX STATIC WEBSITE USING DOCKER
===================================================
ğŸ¯ OBJECTIVE:
To create and host a static web page using Docker and Nginx.

ğŸ§° TOOLS REQUIRED:
Docker, VS Code, Web Browser

==============================
âš™ï¸ STEP 1 â€” CREATE PROJECT FOLDER
==============================
mkdir nginx-webapp && cd nginx-webapp

==============================
âš™ï¸ STEP 2 â€” CREATE INDEX.HTML
==============================
cat > index.html << 'EOF'
<!DOCTYPE html>
<html>
<head><title>Nginx Docker Website</title></head>
<body style="text-align:center;padding-top:100px;font-family:Arial;">
<h1>Hello from Nginx + Docker!</h1><p>Static site inside a container ğŸ³</p>
</body>
</html>
EOF

==============================
âš™ï¸ STEP 3 â€” CREATE DOCKERFILE
==============================
cat > Dockerfile << 'EOF'
FROM nginx:latest
COPY index.html /usr/share/nginx/html/index.html
EXPOSE 80
EOF

==============================
âš™ï¸ STEP 4 â€” BUILD AND RUN CONTAINER
==============================
docker build -t nginx-webapp:v1 .
docker run -d -p 8080:80 nginx-webapp:v1

==============================
âœ… RESULT:
Static HTML page hosted successfully on Nginx Docker container.

===================================================
ğŸ§ª EXPERIMENT 7 â€” MULTI-CONTAINER WEB APP USING DOCKER COMPOSE
===================================================
ğŸ¯ OBJECTIVE:
To deploy a multi-container web application using Flask and Redis via Docker Compose.

ğŸ§° TOOLS REQUIRED:
Python, Flask, Redis, Docker, Docker Compose

==============================
âš™ï¸ STEP 1 â€” CREATE PROJECT FOLDER
==============================
mkdir flask-redis-app && cd flask-redis-app

==============================
âš™ï¸ STEP 2 â€” CREATE FLASK APP (app.py)
==============================
cat > app.py << 'EOF'
from flask import Flask
from redis import Redis

app = Flask(__name__)
redis = Redis(host='redis', port=6379)

@app.route('/')
def hello():
    redis.incr('hits')
    count = redis.get('hits').decode('utf-8')
    return f"<h1>Hello from Flask + Redis ğŸš€</h1><p>Visited {count} times.</p>"

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)
EOF

==============================
âš™ï¸ STEP 3 â€” CREATE REQUIREMENTS
==============================
echo "flask
redis" > requirements.txt

==============================
âš™ï¸ STEP 4 â€” CREATE DOCKERFILE
==============================
cat > Dockerfile << 'EOF'
FROM python:3.9-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["python", "app.py"]
EOF

==============================
âš™ï¸ STEP 5 â€” CREATE DOCKER-COMPOSE FILE
==============================
cat > docker-compose.yml << 'EOF'
version: "3.8"
services:
  web:
    build: .
    ports:
      - "5000:5000"
    depends_on:
      - redis
  redis:
    image: redis:alpine
EOF

==============================
âš™ï¸ STEP 6 â€” BUILD AND RUN
==============================
docker compose up -d

==============================
âš™ï¸ STEP 7 â€” TEST APP
==============================
Open browser â†’ http://localhost:5000

==============================
âœ… RESULT:
Flask + Redis multi-container web app deployed successfully using Docker Compose.
